(()=>{"use strict";$(window).on("load",(function(){prepareAppointmentReport()})),$(document).on("click","#monthData",(function(e){e.preventDefault(),$.ajax({url:route("patientData.dashboard"),type:"GET",data:{month:"month"},success:function(e){e.success&&($("#monthlyReport").empty(),$(document).find("#week").removeClass("show active"),$(document).find("#day").removeClass("show active"),$(document).find("#month").addClass("show active"),""!=e.data.patients.data?$.each(e.data.patients.data,(function(e,t){var a=[{image:t.profile,name:t.user.full_name,email:t.user.email,patientId:t.patient_unique_id,registered:moment.parseZone(t.user.created_at).format("Do MMM Y hh:mm A"),appointment_count:t.appointments_count,route:route("patients.show",t.id)}];$(document).find("#monthlyReport").append(prepareTemplateRender("#adminDashboardTemplate",a))})):$(document).find("#monthlyReport").append('<tr class="text-center">\n                                                    <td colspan="5" class="text-muted fw-bold">No Data Available</td>\n                                                </tr>'))},error:function(e){displayErrorMessage(e.responseJSON.message)}})}));var e=[],t=[],a=0;$.each(appointmentData,(function(n,o){t.push(n),e.push(o),a+=o})),$(document).ready((function(){$(".totalEarning").text(a)}));var n="bar";window.prepareAppointmentReport=function(){$("#appointmentChartId").remove(),$(".appointmentChart").append('<div id="appointmentChartId" style="height: 350px" class="card-rounded-bottom"></div>');var a=document.getElementById("appointmentChartId"),o=(parseInt(KTUtil.css(a,"height")),KTUtil.getCssVariableValue("--bs-gray-500")),r=KTUtil.getCssVariableValue("--bs-gray-200");a&&new ApexCharts(a,{series:[{name:"Amount",type:n,stacked:!0,data:e}],chart:{fontFamily:"inherit",stacked:!0,type:n,height:350,toolbar:{show:!1}},plotOptions:{bar:{stacked:!0,horizontal:!1,borderRadius:4,columnWidth:["12%"]}},legend:{show:!1},dataLabels:{enabled:!1},stroke:{curve:"smooth",show:!0,width:2,colors:["transparent"]},xaxis:{categories:t,axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{colors:o,fontSize:"12px"}}},yaxis:{labels:{style:{colors:o,fontSize:"12px"}}},fill:{opacity:1},states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"none",value:0}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"none",value:0}}},tooltip:{style:{fontSize:"12px"},y:{formatter:function(e){return currencyIcon+" "+e}}},grid:{borderColor:r,strokeDashArray:4,yaxis:{lines:{show:!0}},padding:{top:0,right:0,bottom:0,left:0}}}).render()},$(document).on("click","#changeChart",(function(){"bar"==n?(n="area",$(".chart").removeClass("fa-chart-area"),$(".chart").addClass("fa-chart-bar"),prepareAppointmentReport()):(n="bar",$(".chart").addClass("fa-chart-area"),$(".chart").removeClass("fa-chart-bar"),prepareAppointmentReport())})),$(document).on("change","#serviceId , #doctorId, #serviceCategoryId",(function(n){n.preventDefault();var o=$("#serviceId").val(),r=$("#serviceCategoryId").val(),s=$("#doctorId").val();$(".totalEarning").text(""),$.ajax({url:route("admin.dashboard"),type:"GET",data:{serviceId:o,serviceCategoryId:r,doctorId:s},success:function(n){n.success&&(t=[],e=[],a=0,$.each(n.data,(function(n,o){t.push(n),e.push(o),a+=o})),$(".totalEarning").text(a),prepareAppointmentReport())},error:function(e){displayErrorMessage(e.responseJSON.message)}})})),$(document).on("click","#resetBtn",(function(){$("#serviceId").val("").trigger("change"),$("#doctorId").val("").trigger("change"),$("#serviceCategoryId").val("").trigger("change")})),$(document).on("click","#weekData",(function(e){e.preventDefault(),$.ajax({url:route("patientData.dashboard"),type:"GET",data:{week:"week"},success:function(e){e.success&&($("#weeklyReport").empty(),$(document).find("#month").removeClass("show active"),$(document).find("#day").removeClass("show active"),$(document).find("#week").addClass("show active"),""!=e.data.patients.data?$.each(e.data.patients.data,(function(e,t){var a=[{image:t.profile,name:t.user.full_name,email:t.user.email,patientId:t.patient_unique_id,registered:moment.parseZone(t.user.created_at).format("Do MMM Y hh:mm A"),appointment_count:t.appointments_count,route:route("patients.show",t.id)}];$(document).find("#weeklyReport").append(prepareTemplateRender("#adminDashboardTemplate",a))})):$(document).find("#weeklyReport").append('<tr class="text-center">\n                                                    <td colspan="5" class="text-muted fw-bold">No Data Available</td>\n                                                </tr>'))},error:function(e){displayErrorMessage(e.responseJSON.message)}})})),$(document).on("click","#dayData",(function(e){e.preventDefault(),$.ajax({url:route("patientData.dashboard"),type:"GET",data:{day:"day"},success:function(e){e.success&&($("#dailyReport").empty(),$(document).find("#month").removeClass("show active"),$(document).find("#week").removeClass("show active"),$(document).find("#day").addClass("show active"),""!=e.data.patients.data?$.each(e.data.patients.data,(function(e,t){var a=[{image:t.profile,name:t.user.full_name,email:t.user.email,patientId:t.patient_unique_id,registered:moment.parseZone(t.user.created_at).format("Do MMM Y hh:mm A"),appointment_count:t.appointments_count,route:route("patients.show",t.id)}];$(document).find("#dailyReport").append(prepareTemplateRender("#adminDashboardTemplate",a))})):$(document).find("#dailyReport").append('\n                    <tr class="text-center">\n                        <td colspan="5" class="text-muted fw-bold">No Data Available</td>\n                    </tr>'))},error:function(e){displayErrorMessage(e.responseJSON.message)}})}))})();